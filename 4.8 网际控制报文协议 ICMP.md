《计算机网络》谢希仁 第八版 第146页

一、为了更有效地转发IP数据报和提高交付成功的机会，在网际层使用了ICMP协议

二、主机或路由器使用ICMP协议来发送ICMP报文，ICMP报文有两种：
```bash
	1.ICMP差错报文
	2.ICMP询问报文
```

三、ICMP报文被封装在 IP数据报 中发送

四、ICMP差错报告报文有以下五种
```bash
	1.终点不可达
		路由器或主机不能交付数据报时，向源点发送不可达报文
		（我这路由表里没有，找不到）
	2.源点抑制
		路由器或者主机之间阻塞，向源点发送源点抑制报文
		（我这事情多，超级忙，本地缓存满了，没时间处理你的事）
	3.时间超过
		数据报到我这，计算ttl ，计算结果是0，我把报文扔了，再向源点发送时间超过报文
	4.参数问题
		数据报传到我这，发现首部中有的字段的值不对，我把报文扔了，再向源点发送时参数问题报文
	5.改变路由（重定向）
		路由器把改变路由报文发给主机，让主机知道下次应该将数据报发给另外的路由器
		（即找到了更好的路由）
```

五、以下情况不应该发送ICMP差错报告报文
```bash
	1.对ICMP差错报告报文不再发送ICMP差错报告报文
	2.对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文
	3.对具有多播地址的数据报文都不发送ICMP差错报告报文
	4.对具有特殊地址（如127.0.0.0或0.0.0.0）的数据报不发送ICMP差错报告报文
```

六、常用的ICMP询问报文有以下两种：
```bash
	1.回送请求和回答
	2.时间戳请求和回答
```

七、ICMP应用：
```bash
	1.分组网间探测PING
	2.跟踪路由traceroute
```

